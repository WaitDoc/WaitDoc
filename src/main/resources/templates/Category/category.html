<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<script>
    function find(event){
        event.preventDefault(); // 폼의 기본 동작 중지

        var form = event.target.form;
        var formData = new FormData(form);
        var queryParams = new URLSearchParams(formData).toString();

        fetch("/hospital/category/find?"+queryParams, {
            method: "GET"
        })
            .then(response => response.json()) // JSON 형식으로 응답 파싱
            .then(data => {
                // 결과를 처리하고 표시
                var resultContainer = document.getElementById("resultContainer");

                if (data.length === 0) {
                    resultContainer.textContent = "검색 결과가 없습니다.";
                } else {
                    var resultHTML = "";
                    console.log(data)
                    // 결과 데이터를 순회하며 HTML 생성
                    data.forEach(item => {
                        resultHTML += "<p>" + item.dutyName + "</p>";
                        // 필요한 데이터를 포함한 다른 HTML 요소들을 추가
                    });

                    resultContainer.innerHTML = resultHTML;
                }
            })
            .catch(error => {
                console.error("Error:", error);
            });
    }

</script>
<form >
<!--    th:action="|/hospital/category/find|"-->
    <label for="region">지역</label>
    <select id="region" name="region">
        <option value="서울">서울</option>
        <option value="부산">부산</option>
        <option value="대구">대구</option>
        <!-- 다른 지역 옵션들 -->
    </select>

    <label for="addr">동네:</label>
    <select id="addr" name="addr">
        <option value="강남">강남</option>
        <option value="종로">종로</option>
        <option value="강북">강북</option>
        <!-- 다른 지역 옵션들 -->
    </select>

    <label for="classify">형태:</label>
    <select id="classify" name="classify">
        <option value="A">종합병원</option>
        <option value="B">병원</option>
        <option value="C">의원</option>
        <!-- 다른 형태 옵션들 -->
    </select>

    <label for="department">과목:</label>
    <select id="department" name="department">
        <option value="D001">내과</option>
        <option value="D002">소아청소년과</option>
        <option value="D003">신경과</option>
        <!-- 다른 과목 옵션들 -->
    </select>

    <button onclick="find(event)">제출</button>
</form>
<div id="resultContainer"></div>
</body>
</html>